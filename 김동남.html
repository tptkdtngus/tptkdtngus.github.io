<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ê¹€ë™ë‚¨</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Brush+Script&display=swap" rel="stylesheet">
  <style>
    .brush-font {
      font-family: 'Nanum Brush Script', cursive;
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen">
  <main class="p-4 max-w-2xl mx-auto bg-white shadow rounded mt-10">
    <header class="mb-6">
      <h1 class="text-4xl brush-font text-left text-gray-800">ê¹€ë™ë‚¨</h1>
    </header>

    <!-- ë“±ì¥ì¸ë¬¼ ì†Œê°œ -->
    <section id="intro">
      <h2 class="text-xl font-semibold mb-4">ë“±ì¥ ì¸ë¬¼ ì†Œê°œ</h2>
      <ul class="list-disc list-inside text-lg text-gray-700 mb-4">
        <li>ì£¼ì¸ì´ ì—†ëŠ” ì €íƒì— ë“¤ì–´ì˜¨ ì™¸ë¶€ì¸</li>
        <li>ì €íƒì˜ ëª¨ë“  ë¬¸ì´ ì ê¹€ìœ¼ë¡œì„œ ë‚˜ê°ˆ ë°©ë²•ì„ ì°¾ëŠ” ì¤‘</li>
      </ul>
      <button onclick="showNextSection(); initCharacter();" class="bg-blue-500 text-white p-2 rounded">ê³„ì†</button>
    </section>

    <!-- ì €íƒì˜ ë¡œë¹„ -->
    <section id="lobby" style="display:none;">
      <h2 class="text-xl font-bold mb-2">í˜„ì¬ ìœ„ì¹˜: ì €íƒì˜ ë¡œë¹„</h2>
      <div class="grid grid-cols-2 gap-2 mb-4">
        <button onclick="goTo('front-door')" class="bg-gray-200 p-2 rounded">ì €íƒì˜ ì •ë¬¸</button>
        <button onclick="goTo('back-door')" class="bg-gray-200 p-2 rounded">ì €íƒì˜ í›„ë¬¸</button>
        <button onclick="goTo('second-floor')" class="bg-gray-200 p-2 rounded">2ì¸µ ë¡œë¹„</button>
        <button onclick="goTo('basement')" class="bg-gray-200 p-2 rounded">ì§€í•˜ì‹¤ ì…êµ¬</button>
      </div>
    </section>

    <!-- ì €íƒì˜ ì •ë¬¸ -->
    <section id="front-door" style="display:none;">
      <h2 class="text-xl font-bold mb-2">ì €íƒì˜ ì •ë¬¸</h2>
      <input type="text" id="front-password" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" class="border p-2 mr-2"/>
      <button onclick="checkPassword('front')" class="bg-green-500 text-white p-2 rounded">ì…ë ¥</button>

      <div class="mt-4">
        <button onclick="toggleExamine()" class="bg-yellow-300 text-black p-2 rounded">ì‚´í´ë³´ê¸°</button>
        <div id="examine-options" class="mt-2 hidden">
          <ul class="list-disc list-inside">
            <li><button class="underline text-blue-600" onclick="alert('ì—´ì‡  êµ¬ë©ì—ëŠ” ì•„ë¬´ê²ƒë„ ì—†ì–´ ë³´ì¸ë‹¤.')">ì—´ì‡  êµ¬ë©</button></li>
            <li><button class="underline text-blue-600" onclick="alert('ë¬¸ ë°‘ì—ëŠ” ë¨¼ì§€ ë¿ì´ë‹¤.')">ë¬¸ ë°‘</button></li>
            <li><button class="underline text-blue-600" onclick="addItem('ëˆ„êµ°ê°€ì˜ ìª½ì§€')">ì‹ ë°œì¥</button></li>
          </ul>
        </div>
      </div>
      <button onclick="goTo('lobby')" class="mt-4 bg-gray-200 p-2 rounded">ë¡œë¹„ë¡œ ëŒì•„ê°€ê¸°</button>
    </section>

    <!-- ë‹¤ë¥¸ ê³µê°„ë“¤ (ê¸°ë³¸ í‘œì‹œ ì•ˆí•¨) -->
    <section id="back-door" style="display:none;"><h2 class="text-xl font-bold">ì €íƒì˜ í›„ë¬¸</h2><button onclick="goTo('lobby')" class="mt-4 bg-gray-200 p-2 rounded">ë¡œë¹„ë¡œ ëŒì•„ê°€ê¸°</button></section>
    <section id="second-floor" style="display:none;"><h2 class="text-xl font-bold">2ì¸µ ë¡œë¹„</h2><button onclick="goTo('lobby')" class="mt-4 bg-gray-200 p-2 rounded">ë¡œë¹„ë¡œ ëŒì•„ê°€ê¸°</button></section>
    <section id="basement" style="display:none;"><h2 class="text-xl font-bold">ì§€í•˜ì‹¤ ì…êµ¬</h2><button onclick="goTo('lobby')" class="mt-4 bg-gray-200 p-2 rounded">ë¡œë¹„ë¡œ ëŒì•„ê°€ê¸°</button></section>

    <!-- ì•„ì´í…œ ìƒí˜¸ì‘ìš© ì˜ì—­ -->
    <div id="note-popup" class="hidden mt-6 p-4 bg-yellow-100 border rounded">
      <p class="mb-4">ğŸ“„ ìª½ì§€: <strong>â€œë‹¤ë½ë¬¸ì˜ ë¹„ë°€ë²ˆí˜¸ëŠ” 4722ë€ë‹¤ ì•„ê°€ì•¼â€</strong></p>
      <button onclick="closeNote()" class="bg-blue-500 text-white p-2 rounded">ë¡œë¹„ë¡œ ëŒì•„ê°€ê¸°</button>
    </div>

    <!-- ì•„ì´í…œì°½ -->
    <section class="mt-10 border-t pt-4">
      <h2 class="text-lg font-bold mb-2">ğŸ§³ ì•„ì´í…œì°½</h2>
      <ul id="inventory-list" class="list-disc list-inside text-gray-800"></ul>
    </section>
  </main>

  <script>
    function showNextSection() {
      document.getElementById('intro').style.display = 'none';
      document.getElementById('lobby').style.display = 'block';
    }

    function goTo(locationId) {
      const sections = ['lobby', 'front-door', 'back-door', 'second-floor', 'basement'];
      sections.forEach(id => {
        document.getElementById(id).style.display = 'none';
      });
      document.getElementById('note-popup').classList.add('hidden');
      if (locationId) {
        document.getElementById(locationId).style.display = 'block';
      }
    }

    function checkPassword(door) {
      const inputId = door === 'front' ? 'front-password' : 'back-password';
      const value = document.getElementById(inputId).value.trim();
      const correct = door === 'front' ? 'Not_Found' : 'ìˆ˜ì •í• ê±°ì„';

      if (value === correct) {
        window.location.href = 'Goal_In_Congratulation_sk2asfxcnjss9db.html';
      } else {
        alert('ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.');
      }
    }

    function toggleExamine() {
      const div = document.getElementById('examine-options');
      div.classList.toggle('hidden');
    }

    function setCookie(name, value, days = 7) {
      const expires = new Date(Date.now() + days * 86400000).toUTCString();
      document.cookie = `${name}=${encodeURIComponent(value)}; expires=${expires}; path=/`;
    }

    function getCookie(name) {
      const cookies = document.cookie.split('; ');
      for (const cookie of cookies) {
        const [key, val] = cookie.split('=');
        if (key === name) return decodeURIComponent(val);
      }
      return null;
    }

    function updateInventory() {
      const items = getCookie('dongnam_items');
      const list = document.getElementById('inventory-list');
      list.innerHTML = '';

      if (items) {
        const itemArray = JSON.parse(items);
        itemArray.forEach(item => {
          const li = document.createElement('li');
          const btn = document.createElement('button');
          btn.textContent = item;
          btn.className = 'underline text-blue-600';
          btn.onclick = () => {
            if (item === 'ëˆ„êµ°ê°€ì˜ ìª½ì§€') {
              document.getElementById('note-popup').classList.remove('hidden');
              goTo('');
            } else {
              alert(item + 'ì—ëŠ” íŠ¹ë³„í•œ ê²ƒì´ ì—†ìŠµë‹ˆë‹¤.');
            }
          };
          li.appendChild(btn);
          list.appendChild(li);
        });
      }
    }

    function addItem(itemName) {
      const items = getCookie('dongnam_items');
      let itemArray = items ? JSON.parse(items) : [];
      if (!itemArray.includes(itemName)) {
        itemArray.push(itemName);
        setCookie('dongnam_items', JSON.stringify(itemArray));
        updateInventory();
        alert(`"${itemName}" ì•„ì´í…œì„ íšë“í–ˆìŠµë‹ˆë‹¤.`);
      } else {
        alert('ì´ë¯¸ íšë“í•œ ì•„ì´í…œì…ë‹ˆë‹¤.');
      }
    }

    function closeNote() {
      document.getElementById('note-popup').classList.add('hidden');
      goTo('lobby');
    }

    function initCharacter() {
      // ê¸°ë³¸ ì•„ì´í…œ ì—†ì´ ì‹œì‘
      setCookie('dongnam_items', JSON.stringify([]));
      updateInventory();
    }

    window.onload = updateInventory;
  </script>
</body>
</html>
